<?php
//require_once('common.php');//http://img.95e.com/vm/mat/FQF00000633.jpgif($_REQUEST['func']=='downFQF'){	downFQF(@$_REQUEST['start'],@$_REQUEST['end']);}else{	downFoodPic(@$_REQUEST['hd']);}function downFQF($start=1,$end=10000){	for ($i=$start;$i<$end;$i++) { 		$file_url="http://img.95e.com/vm/mat/FQF".str_pad($i,8,0,STR_PAD_LEFT).".jpg";		downloadFile($i.".jpg",$file_url,"../web/images/material");		echo '<a href="'.$file_url.'">'.$i.".jpg".'<a></br>';	}	echo '</br>download successful';	exit;}function downFoodPic($hd=1){	$food=getFoods();	if(!$food){		echo 'data is null';		exit;	}	foreach ($food as $item){		$file_url="http://app.95e.com/vm/getMaterialPic.aspx?hd=".$hd."&name=".$item['name'];		downloadFile($item['link'],$file_url,"../web/images/food".$hd);		echo '<a href="'.$file_url.'">'.$item['name'].'<a></br>';	}	echo '</br>download successful';	exit;} /**  * 保存文件到本地  * @param 文件路径 $url  * @param 保存本地路径 $savePath  * @return string  */ function downloadFile($fileName,$url,$savePath='') { 	//$fileExt = getUrlFileExt($url); 	//$fileName = $fileName.'.png'; 	$file = file_get_contents($url); 	if(!$file){ 		echo $fileName.' download fail.</br>'; 		return false; 	} 	file_put_contents($savePath.'/'.$fileName,$file); 	return $fileName; }function getFoods(){	$sql="SELECT name,link from food GROUP BY `link`";    $query=exec_sql($sql,1);	return $query;}
