<?phpset_time_limit(0);
//require_once('common.php');//http://img.95e.com/vm/mat/FQF00000633.jpg$start=0;$end=99999999;if(@$_REQUEST['start']){	$start=$_REQUEST['start'];}if(@$_REQUEST['end']){	$end=$_REQUEST['end'];}parse_data($start,$end);function parse_data($start=0,$end=1000000000){	exec_sql('TRUNCATE TABLE menu',1);	for ($i=$start;$i<$end;$i++) { 		$menu=request("http://app.95e.com/vm/getMenu.aspx?i=".$i,[]);		if($menu['errorCode']==0&&$menu['data']){			$data=$menu['data'];			$item['ID']=$data['id'];			$item['name']=trim($data['name'],JSON_UNESCAPED_UNICODE);			$item['brief']=trim($data['brief'],JSON_UNESCAPED_UNICODE);			$item['icon']=trim($data['icon'],JSON_UNESCAPED_UNICODE);			$item['materials']=trim(json_encode($data['materials'],JSON_UNESCAPED_UNICODE));			$item['units']=trim(json_encode($data['units'],JSON_UNESCAPED_UNICODE));			$item['steps']=trim(json_encode($data['steps'],JSON_UNESCAPED_UNICODE));			$item['tips']=trim(json_encode($data['tips'],JSON_UNESCAPED_UNICODE));			$re=insertMenu($item);			$countAll+=$re;			//dlog($item['name'].$foods['data']['updateTime'].':'.$re);		}	}}echo 'access '.$countAll.'recorde';exit;function insertMenu($data){	$sql="INSERT INTO menu(ID,name,brief,pic,materials,units,steps,tips) values (".$data['ID'].",'".$data['name']."','".$data['brief']."','"		.$data['icon']."','".$data['materials']."','".$data['units']."','".$data['steps']."','".$data['tips']."')";	exec_sql($sql,2);	return 1;}
